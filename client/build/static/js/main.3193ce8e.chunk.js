(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{83:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(1),o=s(22),r=s.n(o),c=s(10),i=s(8),l=s(19),d=s(43),u=s.n(d),h=s(44),p=s(2),j=Object(l.c)({bookReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BOOKS":return Object(p.a)(Object(p.a)({},e),{},{list:t.payload});case"GET_BOOK_W_REVIEWER":case"CLEAR_BOOK_W_REVIEWER":return Object(p.a)(Object(p.a)({},e),{},{book:t.payload.book,reviewer:t.payload.reviewer});case"ADD_BOOK":return Object(p.a)(Object(p.a)({},e),{},{newBook:t.payload});case"EDIT_BOOK":return Object(p.a)(Object(p.a)({},e),{},{editBook:t.payload});case"UPDATE_BOOK":return Object(p.a)(Object(p.a)({},e),{},{updatedBook:t.payload});case"DELETE_BOOK":return Object(p.a)(Object(p.a)({},e),{},{deletedBook:t.payload});case"CLEAR_STATE":return Object(p.a)(Object(p.a)({},e),{},{newBook:null,editBook:null,updatedBook:null,deletedBook:null});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(p.a)(Object(p.a)({},e),{},{login:t.payload});case"USER_AUTH":return Object(p.a)(Object(p.a)({},e),{},{auth:t.payload});case"GET_USER_POSTS":return Object(p.a)(Object(p.a)({},e),{},{userPosts:t.payload});case"GET_USERS":return Object(p.a)(Object(p.a)({},e),{},{users:t.payload});case"USER_REGISTER":return Object(p.a)(Object(p.a)({},e),{},{register:{success:t.payload.success,message:t.payload.message},users:t.payload.users});case"USER_SIGNUP":return Object(p.a)(Object(p.a)({},e),{},{signup:t.payload});case"CLEAR_STATE":return Object(p.a)(Object(p.a)({},e),{},{login:null,signup:null,register:null});default:return e}}}),b=s(9),m=s(4),O=s(5),v=s(7),x=s(6),f=s(24),g=s(11),y=s.n(g);function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=y.a.get("/api/books?limit=".concat(e,"&skip=").concat(t,"&order=").concat(s)).then((function(e){return n?[].concat(Object(f.a)(n),Object(f.a)(e.data)):e.data}));return{type:"GET_BOOKS",payload:a}}function w(){return{type:"CLEAR_BOOK_W_REVIEWER",payload:{book:null,reviewer:null}}}function _(e,t){return{type:"USER_LOGIN",payload:y.a.post("/api/login/",{email:e,password:t}).then((function(e){return e.data}))}}function N(e){return{type:"ADD_BOOK",payload:y.a.post("/api/book/",e).then((function(e){return e.data}))}}function E(e){return{type:"UPDATE_BOOK",payload:y.a.post("/api/bookUpdate",e).then((function(e){return e.data}))}}function S(e){return{type:"DELETE_BOOK",payload:y.a.delete("/api/deleteBook/?id=".concat(e)).then((function(e){return e.data}))}}function I(e,t){var s=y.a.post("/api/register",e);return function(e){s.then((function(s){var n=s.data,a=n.success?[].concat(Object(f.a)(t),[n.user]):t,o={success:n.success,message:n.message,users:a};e({type:"USER_REGISTER",payload:o})}))}}function R(e){console.log("user obj ===> ".concat(JSON.stringify(e)));var t=y.a.post("/api/register",e).then((function(e){return e.data}));return console.log(t),{type:"USER_SIGNUP",payload:t}}var B=function(e){var t=new Date(e.createdAt);return Object(n.jsxs)(c.b,{to:"/books/".concat(e._id,"/"),className:"bookitem",children:[Object(n.jsx)("div",{className:"book_header",children:Object(n.jsx)("h2",{children:e.name})}),Object(n.jsxs)("div",{className:"book_info",children:[Object(n.jsx)("div",{className:"book_bubble book_author",children:e.author}),Object(n.jsxs)("div",{className:"book_bubble",children:[Object(n.jsx)("span",{children:"Price: "}),Object(n.jsxs)("div",{className:"book_bubble_value",children:["$ ",e.price," "]})]}),Object(n.jsxs)("div",{className:"book_bubble",children:[Object(n.jsx)("span",{children:"Page: "}),Object(n.jsxs)("div",{className:"book_bubble_value",children:[" ",e.pages," "]})]}),Object(n.jsxs)("div",{className:"book_bubble",children:[Object(n.jsx)("span",{children:"Rate: "}),Object(n.jsxs)("div",{className:"book_bubble_value",children:[" ",e.rating," "]})]}),Object(n.jsxs)("div",{className:"book_bubble",children:[Object(n.jsx)("span",{children:"Published: "}),Object(n.jsxs)("div",{className:"book_bubble_value",children:[" ",t.toDateString()," "]})]})]})]})},P=s(17),C=s.n(P),T=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={loading:!0},e.renderItems=function(e){return e&&e.list?e.list.map((function(e){return Object(a.createElement)(B,Object(p.a)(Object(p.a)({},e),{},{key:e._id}))})):null},e.loadmore=function(){var t=e.props.books.list.length;e.props.dispatch(k(3,t,"desc",e.props.books.list))},e}return Object(O.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(k(3,0,"desc")),setTimeout((function(){e.setState({loading:!1})}),1e3)}},{key:"render",value:function(){return console.log(this.props),this.state.loading?Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(C.a,{style:{marginTop:10},height:100,count:4}),Object(n.jsx)(C.a,{style:{marginTop:5},height:50,count:1})]}):Object(n.jsxs)("div",{children:[this.renderItems(this.props.books),Object(n.jsx)("div",{className:"loadmore",onClick:this.loadmore,children:"LoadMore..."})]})}}]),s}(a.Component);var A=Object(i.b)((function(e){return{books:e.bookReducer}}))(T),U=function(){return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(A,{})})},L=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).renderBook=function(e){var t=e.book?new Date(e.book.createdAt):null;return e.book?Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h2",{className:"book_title",children:e.book.name}),Object(n.jsx)("h3",{className:"book_author",children:e.book.author}),Object(n.jsxs)("div",{className:"book_reviewer_item",children:[Object(n.jsx)("span",{children:" Published At: "}),Object(n.jsx)("div",{children:t.toDateString()})]}),Object(n.jsxs)("div",{className:"book_reviewer_item",children:[Object(n.jsx)("span",{children:" Published By: "}),Object(n.jsx)("div",{className:"reviewer",children:e.reviewer.name+" "+e.reviewer.lastname})]}),Object(n.jsx)("div",{className:"book_review",children:Object(n.jsx)("p",{children:e.book.review})}),Object(n.jsxs)("div",{className:"book_reviewer_item",children:[Object(n.jsx)("span",{children:" Rating: "}),Object(n.jsx)("div",{children:e.book.rating})]}),Object(n.jsxs)("div",{className:"book_reviewer_item",children:[Object(n.jsx)("span",{children:" Price: "}),Object(n.jsxs)("div",{children:["$ ",parseInt(e.book.price).toFixed(2)]})]})]})}):null},e}return Object(O.a)(s,[{key:"componentDidMount",value:function(){this.props.dispatch(function(e){var t=y.a.get("/api/getBook?id=".concat(e));return function(e){t.then((function(t){var s=t.data;y.a.get("/api/getReviewer?id=".concat(s.ownerId)).then((function(t){var n=t.data;e({type:"GET_BOOK_W_REVIEWER",payload:{book:s,reviewer:n}})}))}))}}(this.props.match.params.id))}},{key:"componentWillUnmount",value:function(){this.props.dispatch(w)}},{key:"render",value:function(){console.log(this.props);var e=this.props.bookReviewer;return Object(n.jsx)("div",{children:this.renderBook(e)})}}]),s}(a.Component);var D=Object(i.b)((function(e){return{bookReviewer:e.bookReducer}}))(L),W=s(23),H=s.n(W),G=function(e){return e.children},K=function(e){return e.showSidenav?Object(n.jsx)("div",{onClick:e.showSidenavHandler,className:"backdrop"}):null},F=function(e){return Object(n.jsx)("div",{className:"",children:Object(n.jsxs)(c.b,{onClick:e.showSidenavHandler,to:e.link,className:"linkitem",children:[Object(n.jsx)(H.a,{className:"navitem_icon",name:e.icon}),e.children]})})},M=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).items=[{type:"navItem",icon:"home",text:"Home",link:"/",restricted:!1},{type:"navItem",icon:"user",text:"My Profile",link:"/user/",restricted:!1},{type:"navItem",icon:"book-reader",text:"Add Admins",link:"/user/register/",restricted:!1},{type:"navItem",icon:"key",text:"Login",link:"/login/",userLoggedin:!1},{type:"navItem",icon:"book-reader",text:"My Reviews",link:"/user/user-reviews/",userLoggedin:!0},{type:"navItem",icon:"book-open",text:"Add Reviews",link:"/user/add/",userLoggedin:!0},{type:"navItem",icon:"arrow-down",text:"Logout",link:"/logout",userLoggedin:!1}],e.showSidenavItems=function(){return console.log(e.props),e.items.map((function(t,s){var a=null;return e.props.auth&&e.props.auth.isAuth||"Logout"===t.text?e.props.auth&&e.props.auth.isAuth&&"Login"!==t.text&&(a=Object(n.jsx)("div",{className:"navitem",children:Object(n.jsx)(F,{showSidenavHandler:e.props.showSidenavHandler,icon:t.icon,link:t.link,children:t.text})},t.text+s)):a=Object(n.jsx)("div",{className:"navitem",children:Object(n.jsx)(F,{showSidenavHandler:e.props.showSidenavHandler,icon:t.icon,link:t.link,children:t.text})},t.text+s),a}))},e}return Object(O.a)(s,[{key:"render",value:function(){return this.showSidenavItems()}}]),s}(a.Component);var V=Object(i.b)((function(e){return Object(p.a)({},e.userReducer)}))(M),Y=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){return Object(m.a)(this,s),t.apply(this,arguments)}return Object(O.a)(s,[{key:"render",value:function(){return Object(n.jsxs)(G,{children:[Object(n.jsx)(K,{showSidenav:this.props.showSidenav,showSidenavHandler:this.props.showSidenavHandler}),Object(n.jsx)("div",{className:"sidenav ".concat(this.props.showSidenav?"open":""),children:Object(n.jsx)("div",{children:Object(n.jsx)(V,{showSidenavHandler:this.props.showSidenavHandler})})})]})}}]),s}(a.Component),J=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showSidenav:!1},e.showSidenavHandler=function(){e.setState((function(e){return{showSidenav:!e.showSidenav}}))},e}return Object(O.a)(s,[{key:"render",value:function(){return Object(n.jsxs)(G,{children:[Object(n.jsx)(Y,{showSidenavHandler:this.showSidenavHandler,showSidenav:this.state.showSidenav}),Object(n.jsxs)("header",{children:[Object(n.jsx)("div",{className:"open_nav",children:Object(n.jsx)(H.a,{name:"bars",onClick:this.showSidenavHandler})}),Object(n.jsx)(c.b,{to:"/",className:"logo",children:" The Book Shelf "})]})]})}}]),s}(a.Component),z=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(J,{}),Object(n.jsx)("div",{children:e.children})]})};function $(e){return 0===Object.keys(e).length}var q=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:"",error:"",seccess:!1,loading:!0},e.handleInputEmail=function(t){e.setState({email:t.target.value})},e.handleInputPassword=function(t){e.setState({password:t.target.value})},e.submitForm=function(t){t.preventDefault(),e.props.dispatch(_(e.state.email,e.state.password))},e}return Object(O.a)(s,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({loading:!1})}),1e3)}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_STATE",payload:{}})}},{key:"componentWillReceiveProps",value:function(e){var t=this;console.log("componentWillReceiveProps=========>"),console.log(e),e.login&&e.login.success&&setTimeout((function(){t.props.history.push("/")}),2e3)}},{key:"render",value:function(){this.props.login;return this.state.loading?Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(C.a,{style:{marginTop:10},height:350,count:1})}):Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"form_box",children:Object(n.jsxs)("form",{noValidate:!0,onSubmit:this.submitForm,className:"submitform",children:[Object(n.jsx)("h2",{children:"Login"}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"email",placeholder:"Enter your email",value:this.state.email,onChange:this.handleInputEmail})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"password",placeholder:"Enter your password",value:this.state.password,onChange:this.handleInputPassword})}),Object(n.jsx)("div",{className:"form_element text-center",children:Object(n.jsx)("button",{type:"submit",children:"Login"})}),Object(n.jsxs)("div",{className:"form_element text-center",children:["If you don't have any account!",Object(n.jsx)(c.b,{className:"link link_signup",to:"/signup/",children:"click here to signup."})]}),this.props.login&&!$(this.props.login)?Object(n.jsx)("div",{className:"user_msg ".concat(this.props.login.success?"show success":"show danger"),children:this.props.login.success?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:"You Logged in successfully."}),Object(n.jsx)("div",{children:"It is redirecting to home page..."})]}):Object(n.jsx)("div",{children:this.props.login.message})}):null]})})})}}]),s}(a.Component);var Q=Object(i.b)((function(e){return console.log(e),Object(p.a)({},e.userReducer)}))(q);function X(e,t){var s=function(t){Object(v.a)(a,t);var s=Object(x.a)(a);function a(){var e;Object(m.a)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=s.call.apply(s,[this].concat(n))).state={loading:!0},e}return Object(O.a)(a,[{key:"componentWillMount",value:function(){this.props.dispatch({type:"USER_AUTH",payload:y.a.get("/api/auth").then((function(e){return e.data}))}),this.setState({loading:!1})}},{key:"componentWillReceiveProps",value:function(e){console.log("componentWillReceiveProps in AUTH========>"),console.log(e),!e.auth||e.auth.isAuth||this.props.history.push("/login/")}},{key:"render",value:function(){return this.state.loading?null:Object(n.jsx)(e,Object(p.a)(Object(p.a)({},this.props),{},{user:this.props.auth}))}}]),a}(a.Component);return Object(i.b)((function(e){return Object(p.a)({},e.userReducer)}))(s)}var Z=function(e){return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("div",{className:"avatar",children:Object(n.jsx)("img",{src:"/images/user.png",alt:"avatar"})}),Object(n.jsx)("div",{className:"userinfo",children:e.auth.name}),Object(n.jsx)("div",{className:"userinfo",children:e.auth.lastname}),Object(n.jsx)("div",{className:"userinfo",children:e.auth.email})]})})},ee=s(20),te=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={formdata:{name:"",author:"",review:"",pages:"",rating:"1",price:""}},e.handleInput=function(t,s){var n=Object(p.a)({},e.state.formdata);n[s]=t.target.value,e.setState({formdata:n})},e.submitForm=function(t){t.preventDefault(),console.log(e.state.formdata),e.props.dispatch(N(Object(p.a)(Object(p.a)({},e.state.formdata),{},{ownerId:e.props.auth.id})))},e.showNewBook=function(e){return Object(n.jsx)(c.b,{className:"link",to:"/books/".concat(e),children:"Click here to see the book information..."})},e}return Object(O.a)(s,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_STATE",payload:{}})}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"form_box",children:[Object(n.jsxs)("form",{noValidate:!0,onSubmit:this.submitForm,className:"submitform",children:[Object(n.jsx)("h2",{children:"Add Review"}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"text",placeholder:"Enter name",value:this.state.formdata.name,onChange:function(t){return e.handleInput(t,"name")}})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"text",placeholder:"Enter author",value:this.state.formdata.author,onChange:function(t){return e.handleInput(t,"author")}})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("textarea",{rows:"20",placeholder:"Enter review",value:this.state.formdata.review,onChange:function(t){return e.handleInput(t,"review")}})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"number",placeholder:"Enter pages",value:this.state.formdata.pages,onChange:function(t){return e.handleInput(t,"pages")}})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsxs)("select",{value:this.state.formdata.rating,onChange:function(t){return e.handleInput(t,"rating")},children:[Object(n.jsx)("option",{value:"1",children:"1"}),Object(n.jsx)("option",{value:"2",children:"2"}),Object(n.jsx)("option",{value:"3",children:"3"}),Object(n.jsx)("option",{value:"4",children:"4"}),Object(n.jsx)("option",{value:"5",children:"5"})]})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",Object(ee.a)({type:"number",placeholder:"Enter Price",value:this.state.formdata.price,onChange:this.handleInputPassword},"onChange",(function(t){return e.handleInput(t,"price")})))}),Object(n.jsx)("div",{className:"form_element text-center",children:Object(n.jsx)("button",{type:"submit",children:"Submit"})})]}),this.props.newBook&&!$(this.props.newBook)?Object(n.jsx)("div",{className:"user_msg ".concat(this.props.newBook.success?"show success":"show danger"),children:this.props.newBook.success?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:this.props.newBook.message}),Object(n.jsx)("div",{children:this.showNewBook(this.props.newBook.bookId)})]}):Object(n.jsx)("div",{children:this.props.newBook.message})}):null]})})}}]),s}(a.Component);var se=Object(i.b)((function(e){return console.log(e),Object(p.a)({},e.bookReducer)}))(te),ne=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={formdata:{_id:e.props.match.params.id,name:"",author:"",review:"",pages:"",rating:"",price:""}},e.handleInput=function(t,s){var n=Object(p.a)({},e.state.formdata);n[s]=t.target.value,e.setState({formdata:n})},e.submitForm=function(t){t.preventDefault(),e.props.dispatch(E(e.state.formdata))},e.deleteBook=function(){e.props.dispatch(S(e.props.match.params.id))},e.redirectPage=function(){setTimeout((function(){e.props.history.push("/user/user-reviews/")}),1e3)},e}return Object(O.a)(s,[{key:"componentWillMount",value:function(){var e;this.props.dispatch((e=this.props.match.params.id,{type:"EDIT_BOOK",payload:y.a.get("/api/getBook/?id=".concat(e)).then((function(e){return e.data}))}))}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_STATE",payload:{}})}},{key:"componentWillReceiveProps",value:function(e){var t=e.editBook;console.log("componentWillReceiveProps=====>"),console.log(e),this.setState({formdata:{_id:t._id,name:t.name,author:t.author,review:t.review,pages:t.pages,rating:t.rating,price:t.price}})}},{key:"render",value:function(){var e=this;return console.log(this.props),Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"form_box",children:[Object(n.jsxs)("form",{noValidate:!0,onSubmit:this.submitForm,className:"submitform",children:[Object(n.jsx)("h2",{children:"Add Review"}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"text",placeholder:"Enter name",value:this.state.formdata.name,onChange:function(t){return e.handleInput(t,"name")}})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"text",placeholder:"Enter author",value:this.state.formdata.author,onChange:function(t){return e.handleInput(t,"author")}})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("textarea",{rows:"20",placeholder:"Enter review",value:this.state.formdata.review,onChange:function(t){return e.handleInput(t,"review")}})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"number",placeholder:"Enter pages",value:this.state.formdata.pages,onChange:function(t){return e.handleInput(t,"pages")}})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsxs)("select",{value:this.state.formdata.rating,onChange:function(t){return e.handleInput(t,"rating")},children:[Object(n.jsx)("option",{value:"1",children:"1"}),Object(n.jsx)("option",{value:"2",children:"2"}),Object(n.jsx)("option",{value:"3",children:"3"}),Object(n.jsx)("option",{value:"4",children:"4"}),Object(n.jsx)("option",{value:"5",children:"5"})]})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",Object(ee.a)({type:"number",placeholder:"Enter Price",value:this.state.formdata.price,onChange:this.handleInputPassword},"onChange",(function(t){return e.handleInput(t,"price")})))}),Object(n.jsx)("div",{className:"form_element text-center",children:Object(n.jsx)("button",{type:"submit",children:"Edit Book"})}),Object(n.jsx)("div",{className:"form_element text-center",children:Object(n.jsx)("button",{onClick:this.deleteBook,type:"button",children:"Delete Book"})})]}),this.props.updatedBook&&!$(this.props.updatedBook)||this.props.deletedBook&&!$(this.props.deletedBook)?Object(n.jsx)("div",{className:"user_msg ".concat(this.props.updatedBook&&this.props.updatedBook.success||this.props.deletedBook&&this.props.deletedBook.success?"show success":"show danger"),children:this.props.updatedBook&&this.props.updatedBook.success?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:this.props.updatedBook.message}),Object(n.jsx)(c.b,{className:"link",to:"/books/".concat(this.props.updatedBook.book._id),children:"Click here to see updated book"})]}):this.props.deletedBook&&this.props.deletedBook.success?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:this.props.deletedBook.message}),this.redirectPage()]}):this.props.updatedBook&&!this.props.updatedBook.success?Object(n.jsxs)("div",{children:[" ",this.props.updatedBook.message]}):this.props.deletedBook&&!this.props.deletedBook.success?Object(n.jsxs)("div",{children:[" ",this.props.deletedBook.message]}):null}):null]})})}}]),s}(a.Component);var ae=Object(i.b)((function(e){return Object(p.a)({},e.bookReducer)}))(ne),oe=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).showUserPosts=function(e){return e?e.map((function(e){var t=new Date(e.createdAt);return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{className:"capitalize",children:Object(n.jsx)(c.b,{className:"link",to:"/user/edit-post/".concat(e._id),children:e.name})}),Object(n.jsx)("td",{className:"capitalize",children:e.author}),Object(n.jsx)("td",{children:t.toLocaleDateString()}),Object(n.jsx)("td",{children:e.pages}),Object(n.jsx)("td",{children:parseFloat(e.price).toFixed(2)}),Object(n.jsx)("td",{children:e.rating})]},e._id)})):null},e}return Object(O.a)(s,[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=this.props.auth.id,{type:"GET_USER_POSTS",payload:y.a.get("/api/getUserPosts/?user=".concat(e)).then((function(e){return e.data}))}))}},{key:"render",value:function(){return console.log(this.props),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h4",{children:"Your Reviews"}),Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Author"}),Object(n.jsx)("th",{width:"150px",children:"Date"}),Object(n.jsx)("th",{children:"Pages"}),Object(n.jsx)("th",{children:"Price"}),Object(n.jsx)("th",{children:"Rating"})]})}),Object(n.jsx)("tbody",{children:this.showUserPosts(this.props.user.userPosts)})]})]})}}]),s}(a.Component);var re=Object(i.b)((function(e){return{user:e.userReducer}}))(oe),ce=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={name:"",lastname:"",email:"",password:"",confirmPassword:"",error:""},e.handleInputEmail=function(t){e.setState({email:t.target.value})},e.handleInputPassword=function(t){e.setState({password:t.target.value})},e.handleInputConfirmPassword=function(t){e.setState({confirmPassword:t.target.value})},e.handleInputName=function(t){e.setState({name:t.target.value})},e.handleInputLastname=function(t){e.setState({lastname:t.target.value})},e.submitForm=function(t){t.preventDefault(),e.setState({error:""}),e.props.dispatch(I({email:e.state.email,password:e.state.password,confirmPassword:e.state.confirmPassword,name:e.state.name,lastname:e.state.lastname},e.props.users))},e.showUserList=function(e){return e?e.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.lastname}),Object(n.jsx)("td",{children:e.email})]},e._id)})):null},e}return Object(O.a)(s,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"GET_USERS",payload:y.a.get("/api/users/").then((function(e){return e.data}))})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_STATE",payload:{}})}},{key:"render",value:function(){return console.log("render PROPS ==========>>"),console.log(this.props),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"form_box",children:[Object(n.jsxs)("form",{noValidate:!0,onSubmit:this.submitForm,className:"submitform",children:[Object(n.jsx)("h2",{children:"Register New User"}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"email",placeholder:"Enter your email",value:this.state.email,onChange:this.handleInputEmail})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"password",placeholder:"Enter your password",value:this.state.password,onChange:this.handleInputPassword})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"password",placeholder:"Enter your password again for confirmation",value:this.state.confirmPassword,onChange:this.handleInputConfirmPassword})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"text",placeholder:"Enter your name",value:this.state.name,onChange:this.handleInputName})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"text",placeholder:"Enter your lastname",value:this.state.lastname,onChange:this.handleInputLastname})}),Object(n.jsx)("div",{className:"form_element text-center",children:Object(n.jsx)("button",{type:"submit",children:"Register"})})]}),this.props.register&&!$(this.props.register)?Object(n.jsx)("div",{className:"user_msg ".concat(this.props.register.success?"show success":"show danger"),children:this.props.register.success?Object(n.jsx)("div",{children:Object(n.jsx)("div",{children:"Your account has been successfully saved."})}):Object(n.jsx)("div",{children:this.props.register.message})}):null]}),Object(n.jsxs)("div",{className:"form_box",children:[Object(n.jsx)("h2",{children:"User List"}),Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"Name"}),Object(n.jsx)("td",{children:"Lastname"}),Object(n.jsx)("td",{children:"Email"})]})}),Object(n.jsx)("tbody",{children:this.showUserList(this.props.users)})]})]})]})}}]),s}(a.Component);var ie=Object(i.b)((function(e){return console.log("mapStateToProps STATE=========>"),console.log(e),Object(p.a)({},e.userReducer)}))(ce),le=function(e){y.a.get("/api/logout").then((function(){setTimeout((function(){e.history.push("/login/")}),2e3)}));return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"box logout",children:"Sorry to see you go :("})})},de=function(e){Object(v.a)(s,e);var t=Object(x.a)(s);function s(){var e;Object(m.a)(this,s);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:"",confirmPassword:"",loading:!0},e.handleInputEmail=function(t){e.setState({email:t.target.value})},e.handleInputPassword=function(t){e.setState({password:t.target.value})},e.handleInputConfirmPassword=function(t){e.setState({confirmPassword:t.target.value})},e.submitForm=function(t){t.preventDefault(),e.setState({error:""});var s={email:e.state.email,password:e.state.password,confirmPassword:e.state.confirmPassword};e.props.dispatch(R(s))},e.redirect=function(){setTimeout((function(){e.props.history.push("/login/")}),2e3)},e}return Object(O.a)(s,[{key:"componentWillMount",value:function(){var e=this;setTimeout((function(){e.setState({loading:!1})}),1e3)}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_STATE",payload:{}})}},{key:"render",value:function(){return console.log("PROPS====>"),console.log(this.props),this.state.loading?Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(C.a,{style:{marginTop:10},height:350,count:1})}):Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"form_box",children:[Object(n.jsxs)("form",{noValidate:!0,onSubmit:this.submitForm,className:"submitform",children:[Object(n.jsx)("h2",{children:"Register New User"}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"email",placeholder:"Enter your email",value:this.state.email,onChange:this.handleInputEmail})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"password",placeholder:"Enter your password",value:this.state.password,onChange:this.handleInputPassword})}),Object(n.jsx)("div",{className:"form_element",children:Object(n.jsx)("input",{type:"password",placeholder:"Enter your password again for confirmation",value:this.state.confirmPassword,onChange:this.handleInputConfirmPassword})}),Object(n.jsx)("div",{className:"form_element text-center",children:Object(n.jsx)("button",{type:"submit",children:"Signup"})}),Object(n.jsxs)("div",{className:"form_element text-center",children:["If you have already signed up!",Object(n.jsx)(c.b,{className:"link link_signup",to:"/login/",children:"click here to login."})]})]}),this.props.signup&&!$(this.props.signup)?Object(n.jsx)("div",{className:"user_msg ".concat(this.props.signup.success?"show success":"show danger"),children:this.props.signup.success?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:"Your account has been successfully saved."}),Object(n.jsxs)("div",{children:["It is redirecting to login...",this.redirect()]})]}):Object(n.jsx)("div",{children:this.props.signup.message})}):null]})})}}]),s}(a.Component);var ue=Object(i.b)((function(e){return console.log("STATE====>"),console.log(e),Object(p.a)({},e.userReducer)}))(de),he=function(){return Object(n.jsx)(z,{children:Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{path:"/",exact:!0,component:X(U)}),Object(n.jsx)(b.a,{path:"/login/",exact:!0,component:Q}),Object(n.jsx)(b.a,{path:"/signup/",exact:!0,component:ue}),Object(n.jsx)(b.a,{path:"/user/",exact:!0,component:X(Z)}),Object(n.jsx)(b.a,{path:"/logout/",exact:!0,component:X(le)}),Object(n.jsx)(b.a,{path:"/user/add/",exact:!0,component:X(se)}),Object(n.jsx)(b.a,{path:"/user/register/",exact:!0,component:X(ie)}),Object(n.jsx)(b.a,{path:"/user/edit-post/:id",exact:!0,component:X(ae)}),Object(n.jsx)(b.a,{path:"/books/:id/",exact:!0,component:X(D)}),Object(n.jsx)(b.a,{path:"/user/user-reviews/",exact:!0,component:X(re)})]})})},pe=Object(l.a)(u.a,h.a)(l.d);r.a.render(Object(n.jsx)(i.a,{store:pe(j),children:Object(n.jsx)(c.a,{children:Object(n.jsx)(he,{})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.3193ce8e.chunk.js.map